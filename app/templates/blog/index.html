{% extends "base.html" %}

{% block content %}
<h1 class="text-3xl font-bold mb-6">Blog Posts</h1>
{% if current_user.is_authenticated %}
<a href="{{ url_for('main.new_post') }}" class="bg-blue-500 text-white px-4 py-2 rounded">New Post</a>
{% endif %}
<div class="mt-6">
    {% for post in posts %}
    <div class="mb-6 p-4 bg-white rounded shadow">
        <h2 class="text-2xl font-bold mb-2">
            <a href="{{ url_for('main.blog_post', post_id=post.id) }}">{{ post.title }}</a>
        </h2>
        <p class="text-gray-600 mb-2">By {{ post.author.email }} on {{ post.created_at.strftime('%Y-%m-%d') }}</p>
        <p>{{ post.content[:200] }}{% if post.content|length > 200 %}...{% endif %}</p>
    </div>
    {% endfor %}
</div>
{% endblock %}